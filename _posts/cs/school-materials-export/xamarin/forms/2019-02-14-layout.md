---
layout: post
title: "Layouty "
categories:
    -"xamarin"
    -"forms"
author: "David Malý"
--- 


## Layouty


Grafické prvky lze shlukovat do množin, které ovlivňují jejich vlastnosti. Takové prvky se nazývají layouty. Layouty mohou ovlivňovat vše od barev po pozicování prvků.<br>


### Xamarin.Forms layouty


Xamarin.Forms využívá layoutů hlavně pro určování způsobu, jakým jsou prvky pozicované. Pro ilustraci je rozděluje do několika skupin:
1. s daným pozicováním
2. programátorem nastavitelným pozicováním
3. Custom


#### Dané pozicování


Layouty, které určují, jak budou prvky v nich pozicované. Mezi základní layouty patří StackLayout a Grid.<br>

![](images/stack layouts.png)
##### Stack Layout


Stack layout pozicuje prvky za sebou. Umožňuje nastavení pro horizontální řazení, či vertikální. Jeho velkou předností je jednoduchost návrhu. Programátor nastaví základní vlastnosti layoutu a poté do něj vkládá další UI prvky.<br>





Vytvoření layoutu v code-behind, je možný i XAML zápis.<br>




```

var stack = new StackLayout {Spacing = 20,Children = {  new Label {Text = "Hello World!"},  new Button {Text = "Click Me!"}}
};

```

##### Grid


Rozděluje View na řádky a sloupce. Nejedná se o Table View.  Každý řádek a sloupec musí mít definované základní vlastnosti, čímž se liší od Table View. K prvkům se přistupuje pomocí indexů (souřadnicový systém - řádky, sloupce).<br>



Zápis Grid Layoutu v XAML. Vytvoří 4x, label 2 v každém řádku gridu (celkem 2 řádky a 2 sloupce).<br>


```

<Grid>
  <Grid.RowDefinitions>
    <RowDefinition Height="*" />
    <RowDefinition Height="*" />
  </Grid.RowDefinitions>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="*" />
  </Grid.ColumnDefinitions>
  <Label Text="Top Left" Grid.Row="0" Grid.Column="0" />
  <Label Text="Top Right" Grid.Row="0" Grid.Column="1" />
  <Label Text="Bottom Left" Grid.Row="1" Grid.Column="0" />
  <Label Text="Bottom Right" Grid.Row="1" Grid.Column="1" />
</Grid>

```
[TableView vs Grid vs StackLayout / ListView - best practice ?](https://forums.xamarin.com/discussion/24969/tableview-vs-grid-vs-stacklayout-listview-best-practice)
### Nastavitelné pozicování


Layouty, které určují způsob, jak budou prvky pozicované, ale samotnou implementaci nechávají na vývojáři. Mezi takové patří Absolute a Relative layout.<br>

![](images/Absolute layouts.png)
#### Absolute Layout


Layout, který určuje pozici prvků v absolutních číslech od stran obrazovky (souřadnicový systém).<br>



Label pozicovaný na souřadnice (x,y - 0.5,1) na daných platformách. Jedná se o proporciální hodnoty, které jsou odvíjené od základních hodnot layotu. 0.5 při šířce layoutu je 500 = 250 (500 \* 0.5). Stejně i pro výšku a souřadnici y.<br>



Pozn. *LayoutBounds = x, y, šířka, výška elementu*


```

&ltLabel Text="I'm bottom center on every device."
AbsoluteLayout.LayoutBounds=".5,1,.5,.1" AbsoluteLayout.LayoutFlags="All"  />

```


Je možná zadávat souřadnice i v absolutních číslech


```

&ltLabel Text="Label with absolute cords."
AbsoluteLayout.LayoutBounds="300,200,250,100"  />

```

#### Relative layout


Prvky v tomto layoutu jsou pozicované v závisloti jednoho na druhý. Např. jeden prvek je pod druhým a třetí vpravo od druhého.<br>



Většinou se takový layout rozděli na kvadranty, kde je v každém jeden vodicí prvek, kterému je udaná pozice vzhledem ke kvadrantu. Další prvky jsou poté pozicované podle něj.<br>



Relative layout se používá zejména proto, že umožňuje dynamicky nastavovat prvky v závislosti na velikosti obrazovky. Neumožňuje pixel-perfect.<br>



Pomocí Constraint je určována relativita vzhledem k ostatním prvkům. V Type je určeno, jestli je daný prvek relativní vzhledem k rodiči, nebo jinému View na jeho úrovni. Factor je scale (násobek) vzhledem k hodnotě určené v Property.<br>



BoxView má pozici Y udanou vzhledem k rodičově délce \* 0.15. Takže je umístěno v rodiči.<br>


```

&ltBoxView Color="Red" x:Name="redBox"
        RelativeLayout.YConstraint="{ConstraintExpression Type=RelativeToParent,
            Property=Height,Factor=.15,Constant=0}" />

```


Následující ukázka vkládá červený box do relativního layoutu a nastavuje ho na červeno.<br>


```

&ltRelativeLayout BackgroundColor="Aqua">
    &ltBoxView Color="Red" x:Name="redBox"
        RelativeLayout.YConstraint="{ConstraintExpression Type=RelativeToParent,
            Property=Height,Factor=.15,Constant=0}"
        RelativeLayout.WidthConstraint="{ConstraintExpression
            Type=RelativeToParent,Property=Width,Factor=1,Constant=0}"
        RelativeLayout.HeightConstraint="{ConstraintExpression
            Type=RelativeToParent,Property=Height,Factor=.8,Constant=0}" />
&lt/RelativeLayout>

```
![](images/relativeLayout.png)[Relative layout](https://developer.xamarin.com/guides/xamarin-forms/user-interface/layouts/relative-layout/)
[Zdrojový projekt](https://github.com/malyda/Xamarin.Forms.Layouts.git)