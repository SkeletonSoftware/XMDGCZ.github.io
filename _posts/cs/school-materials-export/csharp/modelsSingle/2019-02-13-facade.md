---
layout: post
title: "facade.php "
categories:
    -"csharp"
    -"csharp"
author: "David Malý"
--- 


##   Facade (fasáda) design pattern


Ivan Merxbauer



Návrhový vzor fasáda zjednodušuje rozhraní komplexního systému.



<br>    Nabízí jednotné rozhraní k sadě rozhraní v podsystému. Definuje rozhraní vyšší úrovně, které zjednodušuje použití podsystému.<br>    
Řeší problém segmentu klientské komunity, který potřebuje zjednodušené rozhraní k celkové funkčnosti komplexního subsystému.<br>



Fasádu nemusí tvořit jediná třída, některé systémy mohou vyžadovat fasádu rozsáhlejší. Složitost fasády by však nikdy neměla přesáhnout složitost zapouzdřeného systému samotného či obtížnost řešené úlohy.


### Důvod vytvoření


Programátoři mnohdy pracují při vývoji aplikace s několika rozhraními různých tříd. Tyto rozhraní mohou být často velice nepřehledné, pokud jsou rozhraní tříd složité, či jich je mnoho. Pokud spolu třídy logicky souvisí, můžeme je sdružit do takzvaného subsystému pomocí fasády. Získáme tak jednotné rozhraní pro funkcionalitu, kterou nám subsystém poskytuje.u


### Výhody

- <br>        sníží počet tříd, které musí klient znát a se kterými musí komunikovat<br>
- <br>        umožní výměnu či změnu komponent "za fasádou" beze změny jejího vnějšího rozhraní<br>
- <br>        vznikne možnost k funkcím jednotlivých komponent přidat i jednoduchou řídící logiku<br>
- <br>        centralizace dané úlohy sníží duplicitu kódu<br>
- <br>        vznikne možnost ke komponentám přidat jednoduchou řídící logiku<br>


### Sekvenční diagram


Pozn.<br>    *ukázka byla převzata ze stránky [dzone.com](https://dzone.com/articles/design-patterns-uncovered-1)*



<br>    Zde je ukázka sekvenčního diagramu, kde je vyobrazeno to, jak funguje fasáda. Nejprve klient vyžádá metodu z fasády, která již automaticky<br>    provede veškeré potřebné metody na vykonání té vyvolané a vrátí její hodnotu z metody. Tím pádem klient nepotřebuje znát kód do hloubky,<br>    protože se o něj postará fasáda<br>



![sekvencni_diagram](images/facade_seq.PNG)


### Ukázka fasády


Pozn.<br>    *ukázka byla převzata ze stránky [sourcemaking.com](https://sourcemaking.com/design_patterns/facade)*



Toto je asi nejstručnější příklad toho jak zhruba funguje fasáda. Zákazník pouze volá na linku,<br>    kde už ho obstará nějaký člověk, v tomto případě by se dalo říci fasáda a ten už zařizuje veškeré věci jako<br>    vyřizování objednávky, poštovné, či placení. Tím pádem člověk neřeší tyto okolnosti, ale pouze využívá "subsystém" v podobě zaměstnance, který<br>    dokáže ovládat všechny tyto potřebné věci k dokončení objednávky.<br>



![ukazka_fasady](images/Facade_example1-2x.png)


### Ukázka fasády ze života


Pozn.<br>    *ukázka byla převzata ze stránky [codeproject.com](https://www.codeproject.com/Articles/481297/UnderstandingplusandplusImplementingplusFacadeplus)*


#### Úvod do problému


<br>    Dejme tomu, že každé ráno před tím než jdu cvičit, musím na mobilu:<br>


- vypnout WIFI
- zapnout DATA
- zapnout GPS
- zapnout hudbu
- zapnout SportsTrackerApp



<br>    Když končím s cvičením tak:<br>


- zapnout WIFI
- vypnout DATA
- vypnout hudbu
- vypnout GPS
- vypnout SportsTrackerApp


#### Ukázka kódu


Kód je psaný v C# a je to konzolová aplikace


##### Controller pro GPS a další služby

```

class GPSController
{
    bool isSwitchedOn = false;

    public bool IsSwitchedOn
    {
        get
        {
            return isSwitchedOn;
        }
        set
        {
            isSwitchedOn = value;
            DisplayStatus();
        }
    }

    private void DisplayStatus()
    {
        string status = (isSwitchedOn == true) ? "ON" : "OFF";
        Console.WriteLine("GPS Switched {0}", status);
    }
}


```


Další controllery budou stejné jen s jiným jménem dané "služby", který bude controller ovládat. (takže WIFIController, InternetDataController, MusicController)


##### SportsTrackerApp

```

class SportsTrackerApp
{
    public void Start()
    {
        Console.WriteLine("Sports Tracker App STARTED");
    }

    public void Stop()
    {
        Console.WriteLine("Sports Tracker App STOPPED");
    }

    public void Share()
    {
        Console.WriteLine("Sports Tracker: Stats shared on twitter and facebook.");
    }
}


```


Tento controller bude "simulovat" aplikaci


##### Hlavní vlákno (aplikace)

```

static void Main(string[] args)
{
    // The phone has been booted up and all the controllers are running
    GPSController gps = new GPSController();
    MobileDataController data = new MobileDataController();
    MusicController zune = new MusicController();
    WifiController wifi = new WifiController();

    ///////////// Going for Jogging /////////////////////

    // 1. Turn off the wifi
    wifi.IsSwitchedOn = false;

    // 2. Switch on the Mobile Data
    data.IsSwitchedOn = true;

    // 3. Turn on the GPS
    gps.IsSwitchedOn = true;

    // 4. Turn on the Music
    zune.IsSwitchedOn = true;

    // 5. Start the Sports-Tracker
    SportsTrackerApp app = new SportsTrackerApp();
    app.Start();

    ///////////// Back from Jogging /////////////////////
    Console.WriteLine();

    // 0. Share Sports tracker stats on twitter and facebook
    app.Share();

    // 1. Stop the Sports Tracker
    app.Stop();

    // 2. Turn off the Music
    zune.IsSwitchedOn = false;

    // 3. Turn off the GPS
    gps.IsSwitchedOn = false;

    // 4. Turn off the Mobile Data
    data.IsSwitchedOn = false;

    // 5. Turn on the wifi
    wifi.IsSwitchedOn = true;
}


```

#### Ukázka akutálního výstupu aplikace


![vystup_aplikace](images/nofacadeSS.jpg)


#### Řešení pomocí fasády


Ukázka řešení, které využívá pattern Fasáda


##### Třída MyJoggingFacade


Zde vytvoříme třídu, která bude použita jako fasáda


```

class MyJoggingFacade
{
    // These handles will be passed to this facade in a real application
    // also on actual device these controllers will be singleton too.
    GPSController gps = new GPSController();
    MobileDataController data = new MobileDataController();
    MusicController zune = new MusicController();
    WifiController wifi = new WifiController();

    SportsTrackerApp app = null;

    public void StartJogging()
    {
        // 1. Turn off the wifi
        wifi.IsSwitchedOn = false;

        // 2. Switch on the Mobile Data
        data.IsSwitchedOn = true;

        // 3. Turn on the GPS
        gps.IsSwitchedOn = true;

        // 4. Turn on the Music
        zune.IsSwitchedOn = true;

        // 5. Start the Sports-Tracker
        app = new SportsTrackerApp();
        app.Start();
    }

    public void StopJogging()
    {
        // 0. Share Sports tracker stats on twitter and facebook
        app.Share();

        // 1. Stop the Sports Tracker
        app.Stop();

        // 2. Turn off the Music
        zune.IsSwitchedOn = false;

        // 3. Turn off the GPS
        gps.IsSwitchedOn = false;

        // 4. Turn off the Mobile Data
        data.IsSwitchedOn = false;

        // 5. Turn on the wifi
        wifi.IsSwitchedOn = true;
    }
}


```

##### Hlavní vlákno (aplikace)


Zde je ukázka toto, jak by vypadalo hlavní vlákno (aplikace), pokud by se použil pattern Fasáda


```

static void Main(string[] args)
{
    MyJoggingFacade facade = new MyJoggingFacade();

    facade.StartJogging();
    Console.WriteLine();
    facade.StopJogging();
}


```

#### Ukázka akutálního výstupu aplikace při použití patternu Fasáda


Je uplně stejný



![vystup_aplikace](images/nofacadeSS.jpg)


##### Class Diagram


Class diagram tohoto řešení, máme třídu, která ovládá subsystém



![class_diagram](images/myFacade.jpg)


#### Shrnutí


Fasáda je výhodná v mnoha směrech demonstrovaných v příkladě nad. Již na první pohled je vidět, že jedna z těchto výhod je kratší kód v hlavním souboru aplikace


#### Zdroje
[tutorialspoint](https://www.tutorialspoint.com/design_pattern/facade_pattern.htm)[sourcemaking](https://sourcemaking.com/design_patterns/facade)[sspbrno](https://www.sspbrno.cz/~lenka.hruskova/maturita/temata/v4i-2011/20-navrhove-vzory.pdf)[voho.eu](http://voho.eu/wiki/facade/)[itnetwork](https://www.itnetwork.cz/navrh/navrhove-vzory/gof/gof-vzory-struktury/facade-navrhovy-vzor)[codeproject](https://www.codeproject.com/Articles/481297/UnderstandingplusandplusImplementingplusFacadeplus)