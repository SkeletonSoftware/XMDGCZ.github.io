---
layout: post
title: "3D grafika "
categories:
    - "csharp"
    - "graphics"
sort_index: 9
author: "David Malý"
--- 


## 3D grafika ve WPF


Stanislav Zdych



Windows Presentation Foundation poskytuje již v základu funkce na vytvoření určitého levelu 3D grafiky, jedná se spíše o jednoduché zobrazení objektů.


### Vytvoření jednoduchého objektu


Aby bylo objekt možné zobrazit, je nutné nejprve vytvořit  Viewport3D, zde se bude v podstatě vkládat celá scéna. Poté se ke scéně přidá světlo a kamera, bez nich by žádný objekt nebyl vidět.



WPF dokáže pracovat se čtyřmi typy světel:


- AmbientLight
- DirectionalLight
- PointLight
- SpotLight

![Rozdíl světel](https://i.stack.imgur.com/3udUJ.gif)

a dvěma typy kamer:


- Perspective
- Orthographic

![Rozdíl kamer](https://i.stack.imgur.com/q1SNB.png)

Prvky se normálně píší v Xaml, ale je možné je vytvářet i přímo v C#. Nejprve je tedy vytvořen kontejner Viewport3D.


```

  
```


Dále se je nutné přidat kameru, v tomto případě perspektivní. Určí se pozice kamery, směr kterým bude kamera zobrazovat scénu. UpDirection určuje ve které ose je strop scény.


```

  
      <PerspectiveCamera
        Position="-40,40,40"
        LookDirection="40,-40,-40 "
        UpDirection="0,0,1" />
  
```


Nakonec je přidán samotný objekt, jenž je renderován vektory a přímé světlo.


```

  
      
          
              
              
                  
                      <MeshGeometry3D Positions="0,0,0 10,0,0 10,10,0 0,10,0 0,0,10
              10,0,10 10,10,10 0,10,10"
              TriangleIndices="0 1 3 1 2 3  0 4 3 4 7 3  4 6 7 4 5 6
                                  0 4 1 1 4 5  1 2 6 6 5 1  2 3 7 7 6 2"/>
                  
                  
                      
                  
              
          
      
  
```

### Ukázka celého kódu


Tento kód zobrazí jednoduchou scénu, jenž se skládá s perspektivní kamery, přímého světla a jednoduché krychle.


```



  <PerspectiveCamera Position="-40,40,40" LookDirection="40,-40,-40 "
              UpDirection="0,0,1" />


  
      
          
          
              
                  <MeshGeometry3D Positions="0,0,0 10,0,0 10,10,0 0,10,0 0,0,10
          10,0,10 10,10,10 0,10,10"
          TriangleIndices="0 1 3 1 2 3  0 4 3 4 7 3  4 6 7 4 5 6
                              0 4 1 1 4 5  1 2 6 6 5 1  2 3 7 7 6 2"/>
              
              
                  
              
          
      
  



```


Výsledný model

![](images/3D.png)

Pro zobrazení komplexních objektů ve formátu .obj apod. je nejlepším řešením použít nugget balíček [Helix Toolkit](https://github.com/helix-toolkit/helix-toolkit).



[Zdrojový projekt](https://github.com/Operator21/WPF3D)