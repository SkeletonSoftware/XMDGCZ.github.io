---
layout: post
title: "di - base.php "
categories:
    -"csharp"
    -"csharp"
author: "David Malý"
--- 


## Dependency injection


David Mašata



Dependency injection (česky: Vkládání závislostí) je technika pro předávání závislostí mezi jednotlivými komponentami aplikace tak, aby jedna komponenta mohla používat druhou.



Dependency Injection je ve své podstatě velmi jednoduchým vzorem, který funguje tak, že volá z projektu kód projektu jiného. Pokud ho budete správně používat, získáte dobře čitelný a znovupoužitelný kód. Dependency Injection přebírá zodpověnost za třídu za zíkávání objektů. Třídě se objekty předávají až při vytváření. Jednoduše se tedy dá říct, že pomocí Dependency injection je možné volat z projektu kód projektu jiného. Třída, která je propojená s interfacem (pomocí Dependency injection ) ho realizuje. Celé se to dá shrnout do jedné sobecké věty: „**nic nesháněj, ať se postará někdo jiný**“.


#### Vložení závislostí


Vložení zavislostí do projektu zahrnuje 4 základní role:


- **Service** (služba) - Určuje objekty, které mají být použity.
- **Client** - Objekt závislý na službách, které používá.
- **Interface** - Rozhraní, které definuje jak může klient dané služby využívat.
- **Injector** - Injektor, který je zodpovědný za stabvu služeb.



Jakýkoliv objekt, který může být použit může být považován za službu. Jakýkoli objekt, který používá jiné objekty lze považovat za klienta.


### Výhody a nevýhody

#### Výhody

- Dependency injection snižuje propojení mezi třídou a její závislostí.
- Celý sdílený kód v projektu je programován proti Interface.
- Dependency service se stará o převedení Interface za třídu.


#### Nevýhody

- Náročnější správa kódu.
- Dependency injection může podpořit závislost na DI framework.


### Mechanismy vkládání

#### Vkládání konstruktorem


Výhodou tohoto způsobu je, že všechny závislosti jsou definovány najednou a objekt je tak po svém vytvoření plně funkční. Naopak nevýhodou je nepřehledný zápis v případě většího počtu závislostí, stává se nepřehledný.

**Constructor injection**
```

class Gallery
{
        /** @var PDO */
        private $connection;

        public function __construct(PDO $connection)
        {
                $this->connection = $connection;
        }
}


```

#### Vkládání setterem


Ke každé závislosti je vytvořen odpovídající setter a okolí tyto settery zavolá před prvním použitím objektu. Nevýhodou je, že není zaručeno, že budou tyto settery skutečně před použitím objektu zavolány. Proto může dojít během vykonávání programu k chybám.

**Setter injection**
```

class Gallery
{
        /** @var PDO */
        private $connection;

        public function setConnection(PDO $connection)
        {
                $this->connection = $connection;
        }
}


```

#### Vkládání interface


Jedná se o rozhraní. To v sobě bude obsahovat názvy metod, které předají dané objekty.

**Interface injection**
```

interface InjectConnection
{
        public function injectConnection(PDO $connection);
}


```
[Dependency-Injection for beginners](http://www.theserverside.com/news/1321158/A-beginners-guide-to-Dependency-Injection)