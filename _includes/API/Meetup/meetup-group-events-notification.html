{% comment %}
    Used for getting info about group events from Meetup API
{% endcomment %}

{% include  /API/Meetup/notification-view.html %}

<script>
    var jsonpCallback = function(response) {
        console.log( response.data);
        if(response.data.length > 0) {
            var response_data = response.data[0];

            var name_html = document.getElementById("event-name");
            var date_html = document.getElementById("event-date");
            var time_html = document.getElementById("event-time");
            var location_html = document.getElementById("event-location");
            var link_html = document.getElementById("event-location");

            link_html.src = response_data.link;
            name_html.innerText = response_data.name;
            date_html.innerText = response_data.local_date;
            time_html.innerText = response_data.local_time;
            if (response_data.visibility == "public") {
                location_html.innerText = response_data.venue.address_1 + " " + response_data.city;
            }

            // Show html
            document.getElementById("event-notification").classList.remove('hide');
        }

        // link local_date local_time name venue.address_1 city
    }
    var url = "https://api.meetup.com/{{ site.meetup.group }}/events/";
    var params = ["status=upcoming","page=1", "sign=true"];

    var src = url;
    src += "?" + params.join("&");

    src += "&callback=jsonpCallback";

    var scriptTag = document.createElement('SCRIPT');
    scriptTag.src = src;

    document.getElementsByTagName('HEAD')[0].appendChild(scriptTag);
</script>